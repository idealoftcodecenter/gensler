@use "_00_variables-and-mixins" as *;

.screen,
.state {
	@include uiTransition(all 0.3s ease-in-out);
	@include borderRadius(6px);
	inset: 0;

	/* transform origin */
	-webkit-transform-origin: bottom center;
	-moz-transform-origin: bottom center;
	-ms-transform-origin: bottom center;
	transform-origin: bottom center;

	/* initial state */
	opacity: 0;

	-webkit-transform: scale(0);
	-moz-transform: scale(0);
	-ms-transform: scale(0);
	transform: scale(0);

	pointer-events: none;
	will-change: transform, opacity;

	/* transitions */
	-webkit-transition:
		-webkit-transform 260ms cubic-bezier(0.85, 0, 0.15, 1),
		opacity 260ms cubic-bezier(0.85, 0, 0.15, 1);
	-moz-transition:
		-moz-transform 260ms cubic-bezier(0.85, 0, 0.15, 1),
		opacity 260ms cubic-bezier(0.85, 0, 0.15, 1);
	-ms-transition:
		-ms-transform 260ms cubic-bezier(0.85, 0, 0.15, 1),
		opacity 260ms cubic-bezier(0.85, 0, 0.15, 1);
	transition:
		transform 260ms cubic-bezier(0.85, 0, 0.15, 1),
		opacity 260ms cubic-bezier(0.85, 0, 0.15, 1);
}
.state {
	background-color: #31446B;
}
.screen {
	background-color: #232F3E;
}
/* ACTIVE */
.screen.active,
.state.active {
	opacity: 1;

	-webkit-transform: scale(1);
	-moz-transform: scale(1);
	-ms-transform: scale(1);
	transform: scale(1);

	pointer-events: auto;

	/* ENTRY ANIMATION */
	-webkit-animation: screen-in 640ms cubic-bezier(0.85, 0, 0.15, 1);
	-moz-animation: screen-in 640ms cubic-bezier(0.85, 0, 0.15, 1);
	-ms-animation: screen-in 640ms cubic-bezier(0.85, 0, 0.15, 1);
	animation: screen-in 640ms cubic-bezier(0.85, 0, 0.15, 1);
}
.screen-out {
	-webkit-animation: screen-out 0.7s cubic-bezier(0.87, 0, 0.13, 1) forwards;
	animation: screen-out 0.7s cubic-bezier(0.87, 0, 0.13, 1) forwards;
}

.state-loaded > header {
	height: 67px;
}
.state-loaded > footer {
	height: 110px;
}

aside {
    width: 30%;
}
.right {
	width: 70%;
}
.game-area {
	width: 70%;
	border: 2px solid #fff;
}
.content-section {
	height: 506px;
	perspective: 1200px; /* needed for 3D rotateX to look nice */
	-webkit-perspective: 1200px;
}

//=================================================== BACK BUTTON
.back-btn {
	@include uiTransition(all .1s ease-in-out);
	opacity: 0;
	visibility: hidden;
}
.back-btn:hover {
	color: white;
}
.back-btn.active {
	opacity: 1;
	visibility: visible;
}
.back-btn .bar {
	margin-left: 10px;
	margin-right: 10px;
}

//=================================================== ARROW
.arrow {
	display: inline-block;
	height: 16px;
}
.arrow .line {
	display: inline-block;
	height: 2px;
	width: 20px;
	background-color: #fff;
	-webkit-transition: all 0.2s ease-in-out;
	-moz-transition: all 0.2s ease-in-out;
	-ms-transition: all 0.2s ease-in-out;
	-o-transition: all 0.2s ease-in-out;
	transition: all 0.2s ease-in-out;
	position: relative;
}
.arrow .line::after {
	content: '';
	display: inline-block;
	width: 10px;
	height: 10px;
	position: absolute;
	right: 1px;
	top: -4.5px;
	border-top: 2px solid #fff;
	border-right: 2px solid #fff;
	-webkit-transition: all 0.2s ease-in-out;
	-moz-transition: all 0.2s ease-in-out;
	-ms-transition: all 0.2s ease-in-out;
	-o-transition: all 0.2s ease-in-out;
	transition: all 0.2s ease-in-out;

	transform: rotate(45deg);
}
.arrow.white .line {
	background-color: #fff;
}
.arrow.white .line::after {
	border-top-color: #fff;
	border-right-color: #fff;
}
.arrow.blue .line {
	background-color: #31446B;
}
.arrow.blue .line::after {
	border-top-color: #31446B;
	border-right-color: #31446B;
}
a:hover .arrow .line,
button:hover .arrow .line,
.cursor-wrapper:hover .arrow .line {
	width: 32px;
}
.arrow.back {
	-webkit-transform: translate(0, 11px) rotate(180deg);
	-moz-transform: translate(0, 11px) rotate(180deg);
	transform: translate(0, 11px) rotate(180deg);
}
.arrow.down-left {
	-webkit-transform: translate(40%, 6px) rotate(135deg);
	-moz-transform: translate(40%, 6px) rotate(135deg);
	transform: translate(40%, 6px) rotate(135deg);
}


//=================================================== ARROW
.timer__number {
	font-size: 34px;
	font-weight: 700;
}
.timer__colon {
	font-size: 34px;
	font-weight: 700;
	margin-left: 4px;
	margin-right: 4px;
}


.character-selection-box {
	border: 2px solid #fff;
}

.keys {
	width: 148px;
	height: 98px;
}
.no-key, .key {
	width: 48px;
	height: 48px;
}
.key {
	border: 2px solid #FFF7CC;
	@include borderRadius(4px);
	background: #B1A3EE;
	opacity: 0.2;
	transition: opacity 0.2s ease, transform 0.15s ease;

}
.key-up img {
	transform: rotate(180deg);
}
.key-left img {
	transform: rotate(90deg);
}
.key-right img {
	transform: rotate(-90deg);
}


/* This direction is reachable from current node */
.key.available {
	opacity: 1;
}

/* Not reachable from current node */
.key.disabled {
	opacity: 0.15;
	pointer-events: none;
}

/* Pressed by keyboard or mouse */
.key.pressed {
	transform: scale(0.9);
	opacity: 1;
}

/* OPTIONAL: manual "active" state */
.key.active {
	opacity: 1;
}

.north-marker {
	position: absolute;
	left: 30px;
	bottom: 20px;
}

.map-container {
	border: 2px solid #fff;
	background: #31446B;
}
.map-container .map {
	display: inline-block;
	height: 100%;
}

.location-character img {
	display: none;
}
.location-character > img {
	height: 100%;
	width: auto;
}
.location-character > img.active {
	display: block;
}
.locations-layer .label {
	@include uiTransition(all .24s ease-in-out);
	-webkit-transform: scale(0);
	-moz-transform: scale(0);
	transform: scale(0);
	-webkit-transform-origin: center top;
	-moz-transform-origin: center top;
	transform-origin: center top;
	opacity: 0;
}
.locations-layer .location-marker:hover .label {
	-webkit-transform: scale(1);
	-moz-transform: scale(1);
	transform: scale(1);
	opacity: 1;
}


/* Full-screen black overlay */
#screen-warning-overlay {
	position: fixed;
	inset: 0;
	background: #1F2A36;
	display: none;
	/* jQuery will show/hide this */
	z-index: 9999;

	display: flex;
	align-items: center;
	justify-content: center;
}

/* Content centered inside overlay */
.screen-warning-content {
	text-align: center;
	padding: 1.5rem;
}

/* Small logo above the message */
.screen-warning-logo {
	display: block;
	margin: 0 auto 1.5rem auto;
	max-width: 120px;
	height: auto;
}

/* Message text */
.screen-warning-text {
	color: #fff;
	font-size: 1.3rem;
	line-height: 1.5;
}

/* Optional: dim page when overlay is visible */
body.overlay-active {
	overflow: hidden;
}


.speech-bubble {
	position: absolute;
}
.speech-bubble {
	position: absolute;
	opacity: 0;
	pointer-events: none;

	-webkit-transform: translate3d(0, 16px, 0) scale(0.85);
	-moz-transform: translate3d(0, 16px, 0) scale(0.85);
	-ms-transform: translate3d(0, 16px, 0) scale(0.85);
	-o-transform: translate3d(0, 16px, 0) scale(0.85);
	transform: translate3d(0, 16px, 0) scale(0.85);
}
/* Replace .screen.active with your actual "visible screen" selector */
.screen.active .speech-bubble {
	-webkit-animation: speechBubbleIn 0.5s ease-in-out .5s forwards;
	-moz-animation: speechBubbleIn 0.5s ease-in-out .5s forwards;
	-o-animation: speechBubbleIn 0.5s ease-in-out .5s forwards;
	animation: speechBubbleIn 0.5s ease-in-out .5s forwards;
}

.speech-bubble  .line {
	position: absolute;
}
.speech-bubble .text {
	height: auto;
	padding: 10px 16px;
	@include borderRadius(6px);
	background: #EED5FE;
	border: 4px solid #fff;
	color: #31446B;
	line-height: 1.3em;
	letter-spacing: 0.03em;
	word-spacing: 0.04em;
}


// ===================================================> Links inside map
.exit-to-map,
.map-links {
	height: 44px;
	width: auto;
	background: #FFF7CC;
	border: 2px solid #31446B;
	position: absolute;
	right: 5%;
	bottom: 10%;
	line-height: 30px;
	padding-left: 16px;
	padding-top: 7px;
	padding-bottom: 7px;
	@include borderRadius(22px);
	color: #31446B;
	@include uiTransition(all .24s ease-in-out);
}
.exit-to-map:hover,
.map-links:hover {
	background: #31446B;
	border-color: #FFDB52;
	color: #FFDB52;
	@include uiTransition(all .24s ease-in-out);
	-webkit-transform: scale(1.05);
	-moz-transform: scale(1.05);
	-ms-transform: scale(1.05);
	-o-transform: scale(1.05);
	transform: scale(1.05);
}
.exit-to-map .arrow.blue .line, 
.map-links .arrow.blue .line {
	background-color: #31446B;
}
.exit-to-map .arrow.blue .line::after, 
.map-links .arrow.blue .line::after {
	border-top-color: #31446B;
	border-right-color: #31446B;
}
.exit-to-map:hover .arrow .line, 
.map-links:hover .arrow .line {
	background-color: #FFDB52;
}
.exit-to-map:hover .arrow .line::after, 
.map-links:hover .arrow .line::after {
	border-top-color: #FFDB52;
	border-right-color: #FFDB52;
}

.exit-to-map .pipe, 
.map-links .pipe {
	display: block;
	height: 100%;
	width: 2px;
	background: #B1A3EE;
}
.exit-to-map .icon, 
.map-links .icon {
	width: 56px;
	height: 56px;
	background: #DDEFFE;
	border: 2px solid #31446B;
	@include borderRadius(28px);
	margin-right: -5px;
}
.first-floor-amenities, 
.first-floor-amenities {
	left: 5%;
	top: 20%;
	max-width: 320px;
}



.scorboard-wrapper {
	width: 100%;
	height: 56px;
	overflow: hidden;
}
.scorboard-wrapper .scoreboard {
	@include uiTransition(all .24s ease-in-out);
	-webkit-transform: translate(0, 110%);
	-moz-transform: translate(0, 110%);
	-ms-transform: translate(0, 110%);
	-o-transform: translate(0, 110%);
	transform: translate(0, 110%);
}
.scorboard-wrapper .scoreboard.active {
	-webkit-transform: translate(0, 0);
	-moz-transform: translate(0, 0);
	-ms-transform: translate(0, 0);
	-o-transform: translate(0, 0);
	transform: translate(0, 0);
}
.score-box rect {
    fill: #D5F0D8 !important;
    transition: all 0.2s ease;
}

.score-box.active rect {
    fill: #B062E0 !important;
}


.location-marker:hover .label { opacity: 1; }

.player-character {
	display: none;
}
.player-character.active {
	display: block;
}